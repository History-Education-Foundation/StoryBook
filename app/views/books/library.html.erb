<% content_for :header, "My Library" %>
<div>
  <%= link_to "← Back to Books", books_path, class: "rounded px-4 py-2 bg-gray-200 text-gray-800 hover:bg-gray-300 font-semibold" %>
</div>

<% if @books.any? %>
<ul class="mt-6 grid gap-4">
  <% @books.each do |book| %>
    <li class="bg-white rounded shadow p-4">
      <h2 class="text-xl font-bold mb-1 flex items-center gap-2">
        <%= link_to book.title, read_books_path(book), class: "hover:underline text-blue-700" %>
        <% if book.status.present? %>
          <span class="inline-block px-2 py-1 rounded text-xs font-semibold
            <%= case book.status
              when 'Draft' then 'bg-yellow-100 text-yellow-800 border border-yellow-300'
              when 'Published' then 'bg-green-100 text-green-800 border border-green-300'
              when 'Archived' then 'bg-gray-200 text-gray-800 border border-gray-300'
              else 'bg-gray-100 text-gray-600 border border-gray-200' end %>">
            <%= book.status %>
          </span>
        <% end %>
      </h2>
      <div class="text-xs text-gray-500 mb-1">Reading Level: <%= book.reading_level.presence || 'n/a' %></div>
      <div class="mb-1 text-sm">Learning Outcome: <%= book.learning_outcome.presence || 'n/a' %></div>
      <div class="mt-2 flex gap-2">
        <%= button_to 'Remove from My Library', unsave_book_path(book), method: :delete, form: { data: { turbo: "false" } }, class: 'px-3 py-1 rounded bg-red-50 text-red-700 text-sm font-semibold', data: { turbo_confirm: 'Are you sure?' } %>
      </div>
    </li>
  <% end %>
</ul>
<% else %>
  <div class="mt-6 text-gray-400 italic">You haven't saved any books yet.</div>
<% end %>
