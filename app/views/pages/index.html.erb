<% content_for :header, "Pages in Chapter: '#{@chapter.title}'" %>
<div class="flex gap-4">
  <%= link_to "← Back to Chapters", book_chapters_path(@book), class: "rounded px-4 py-2 bg-gray-200 text-gray-800 hover:bg-gray-300 font-semibold" %>
  <%= link_to "Add Page", new_book_chapter_page_path(@book, @chapter), class: "rounded px-4 py-2 bg-purple-600 text-white hover:bg-purple-700 font-semibold" %>
</div>

<% if @pages.any? %>
  <ul class="mt-6 grid gap-4">
    <% @pages.each do |page| %>
      <li class="bg-white rounded shadow p-4">
        <% if page.image.attached? %>
          <div class="mb-2">
            <%= image_tag url_for(page.image), class: "rounded border h-24 w-24 object-cover" %>
            <span class="text-xs text-gray-500 ml-2">Image attached</span>
          </div>
        <% end %>
        <div class="mb-1 text-sm">Content: <%= page.content.presence || 'n/a' %></div>
        <div class="mt-2 flex gap-2">
          <%= link_to 'Edit', edit_book_chapter_page_path(@book, @chapter, page), class: 'px-3 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-sm' %>
          <%= link_to 'Delete', book_chapter_page_path(@book, @chapter, page), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this page?' }, class: 'px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-sm' %>
        </div>
      </li>
    <% end %>
  </ul>
<% else %>
  <div class="mt-6 text-gray-400 italic">No pages yet for this chapter.</div>
<% end %>
