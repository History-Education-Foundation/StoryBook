<% if user_signed_in? %>
  <div class="mb-4 p-4 rounded bg-green-100 text-green-800 font-medium">
    You are signed in!
  </div>

  <div class="max-w-2xl mx-auto mt-8">
    <h2 class="text-2xl font-bold mb-3">Your Journal Entries</h2>
    <div class="mb-3">
      <a href="<%= new_journal_entry_path %>" class="bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700">New Entry</a>
      <a href="<%= journal_entries_path %>" class="ml-2 text-indigo-700 underline">View All</a>
    </div>
    <% journal_entries = current_user.journal_entries.order(created_at: :desc).limit(5) %>
    <% if journal_entries.any? %>
      <ul class="space-y-4">
        <% journal_entries.each do |entry| %>
          <li class="border rounded p-4 bg-white shadow">
            <div class="flex justify-between">
              <h3 class="text-lg font-semibold"><%= link_to entry.title.presence || '(untitled)', journal_entry_path(entry), class: 'text-indigo-700 hover:underline' %></h3>
              <span class="text-gray-500 text-sm"><%= entry.created_at.strftime('%b %d, %Y') %></span>
            </div>
            <p class="mt-1 text-gray-700"><%= truncate(entry.body, length: 100) %></p>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-gray-600">No entries found. Create your first entry!</p>
    <% end %>
  </div>
<% else %>
  <div class="max-w-xl mx-auto mt-16 text-center p-8 bg-white bg-opacity-70 rounded shadow">
    <h2 class="text-3xl font-bold text-indigo-700 mb-4">Welcome to Your AI Journal</h2>
    <p class="text-gray-700 text-lg mb-6">This is your private, secure AI-powered journal. Reflect daily, capture thoughts, and use intelligent prompts to help you write and grow—right here.</p>
    <ul class="list-disc text-left text-gray-800 mx-auto mb-6 max-w-md">
      <li>AI-generated prompts to spark your writing</li>
      <li>Search and revisit your past entries</li>
      <li>100% private to you</li>
    </ul>
    <div class="mt-8">
      <!-- end hero content -->
    </div>
    <!-- end hero content -->
    </div>
  </div>
  <!-- Review Carousel now below the entire hero section -->
  <div class="max-w-xl mx-auto mt-10">
    <div data-controller="carousel" data-carousel-reviews='["i guess its ok", "it deleted my journal entries"]' class="w-full">
      <div class="relative bg-gray-50 rounded-lg px-8 py-6 shadow flex flex-col items-center border border-gray-200">
        <!-- Star icons -->
        <div class="flex mb-2">
          <svg class="h-5 w-5 text-yellow-300" fill="currentColor" viewBox="0 0 20 20"><polygon points="9.9,1.7 7.6,6.8 2,7.6 6.2,11.3 5,17 9.9,14.2 15,17 13.8,11.3 18,7.6 12.4,6.8 "/></svg>
          <svg class="h-5 w-5 text-yellow-300" fill="currentColor" viewBox="0 0 20 20"><polygon points="9.9,1.7 7.6,6.8 2,7.6 6.2,11.3 5,17 9.9,14.2 15,17 13.8,11.3 18,7.6 12.4,6.8 "/></svg>
          <svg class="h-5 w-5 text-yellow-300" fill="currentColor" viewBox="0 0 20 20"><polygon points="9.9,1.7 7.6,6.8 2,7.6 6.2,11.3 5,17 9.9,14.2 15,17 13.8,11.3 18,7.6 12.4,6.8 "/></svg>
          <svg class="h-5 w-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><polygon points="9.9,1.7 7.6,6.8 2,7.6 6.2,11.3 5,17 9.9,14.2 15,17 13.8,11.3 18,7.6 12.4,6.8 "/></svg>
          <svg class="h-5 w-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><polygon points="9.9,1.7 7.6,6.8 2,7.6 6.2,11.3 5,17 9.9,14.2 15,17 13.8,11.3 18,7.6 12.4,6.8 "/></svg>
        </div>
        <div id="carousel-text" data-carousel-target="text" class="text-base leading-relaxed italic text-gray-700 min-h-[2rem]">i guess its ok</div>
        <div class="flex gap-4 mt-4">
          <button type="button" data-action="carousel#prev" class="rounded-full bg-gray-100 text-indigo-700 px-3 py-1 font-bold hover:bg-indigo-200">&larr;</button>
          <button type="button" data-action="carousel#next" class="rounded-full bg-gray-100 text-indigo-700 px-3 py-1 font-bold hover:bg-indigo-200">&rarr;</button>
        </div>
        <div class="mt-2 text-xs text-gray-500">&mdash; my gf</div>
      </div>
    </div>
  </div>
      <div class="flex flex-col items-center">
        <a href="<%= new_user_registration_path %>" class="inline-block px-6 py-3 bg-indigo-700 text-white font-semibold rounded hover:bg-indigo-800 transition">Get Started — Create Your Journal</a>
        <div class="mt-4 text-gray-600 text-center">
          Already have an account?
          <%= link_to "Sign In", new_user_session_path, class: "text-indigo-700 underline hover:text-indigo-900" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
