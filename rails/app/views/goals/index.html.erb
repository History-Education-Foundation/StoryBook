<% content_for :header do %>
  Your Goals
<% end %>

<div class="flex justify-between items-center mb-6">
  <h2 class="text-xl font-semibold">My Goals</h2>
  <%= link_to "New Goal", new_goal_path, class: "inline-block rounded bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700" %>
</div>

<table class="min-w-full divide-y divide-gray-200 rounded shadow">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Target Date</th>
      <th class="px-4 py-2"></th>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    <% @goals.each do |goal| %>
      <tr>
        <td class="px-4 py-2"><%= link_to goal.title, goal_path(goal), class: 'text-indigo-700 hover:underline' %></td>
        <td class="px-4 py-2"><%= goal.status.presence || "active" %></td>
        <td class="px-4 py-2"><%= goal.target_date&.strftime("%Y-%m-%d") || "" %></td>
        <td class="px-4 py-2 text-right">
          <%= link_to 'Edit', edit_goal_path(goal), class: 'text-blue-600 hover:text-blue-900 mr-2' %>
          <%= link_to 'Delete', goal_path(goal), method: :delete, data: { confirm: 'Are you sure?' }, class: 'text-red-600 hover:text-red-900' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if @goals.empty? %>
  <div class="mt-6 text-gray-600">You have no goals yet. <%= link_to 'Add one!', new_goal_path, class: 'text-indigo-700 underline' %></div>
<% end %>
